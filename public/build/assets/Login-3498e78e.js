import{m as h,o as i,c as a,a as s,t as l,b as d,w as c,v as u,d as _,e as g}from"./app-57257bd6.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";const p={name:"Login",data(){return{isLoading:!1,validationErrors:{},errorMsg:null,showPassword:!1,auth:{email:"",password:""}}},methods:{...h({signIn:"auth/login"}),async login(){this.isLoading=!0;try{await axios.get("/sanctum/csrf-cookie"),(await axios.post("/login",this.auth)).status===200?await this.signIn():alert("Login failed. Unexpected response status.")}catch(t){console.error(t),t.response?t.response.status===422?this.validationErrors=t.response.data.errors:(this.validationErrors={},this.errorMsg=t.response.data.message):alert("An error occurred while logging in.")}finally{this.isLoading=!1}},togglePassword(){this.showPassword=!this.showPassword}}},w={class:"centered"},v={class:"container mb-auto mt-auto signin"},b={class:"card mx-auto card-auth border-0"},f={class:"form-signin"},y={class:"card-body"},x=s("div",{class:"text-center"},[s("img",{src:"/img/mpower_logo_text_nopad.png",alt:"MPower Promo",class:"logo-h mb-3"}),s("h2",null,"Sign In")],-1),k={key:0,class:"alert alert-danger"},E=s("span",{id:"reauth-email",class:"reauth-email"},null,-1),P={class:"form-group"},L=s("label",null,"Email",-1),M={key:0},V={class:"text-danger small"},j={class:"form-group"},q=s("label",null,"Password",-1),S=["type"],B={class:"text-right"},C={key:0},D={class:"text-danger small"},I={class:"row justify-content-between"},N={class:"col-12 text-right"},U=["disabled"],A={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},O=s("div",{class:"col-12 pt-2"},[s("a",{class:"small btn btn-link btn-block"},"Forgot password?")],-1),T=s("div",{class:"text-center"},[s("small",null,"v0.1.0")],-1);function F(t,e,H,z,o,n){return i(),a("div",w,[s("div",v,[s("div",b,[s("form",f,[s("div",y,[x,o.errorMsg?(i(),a("div",k,l(o.errorMsg),1)):d("",!0),E,s("div",P,[L,c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.auth.email=r),type:"email",id:"inputEmail",required:"required",class:"form-control"},null,512),[[u,o.auth.email]]),Object.keys(o.validationErrors).length>0&&o.validationErrors.email?(i(),a("div",M,[s("span",V,l(o.validationErrors.email[0]),1)])):d("",!0)]),s("div",null,[s("div",j,[q,c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.auth.password=r),type:o.showPassword?"text":"password",autocomplete:"new-password",required:"required",class:"form-control",style:{"background-color":"inherit"}},null,8,S),[[_,o.auth.password]]),s("div",B,[s("a",{class:"text-primary small",onClick:e[2]||(e[2]=(...r)=>n.togglePassword&&n.togglePassword(...r)),href:"javascript:void(0)"},l(o.showPassword?"Hide":"Show")+" Password ",1)]),Object.keys(o.validationErrors).length>0&&o.validationErrors.password?(i(),a("div",C,[s("span",D,l(o.validationErrors.password[0]),1)])):d("",!0)])]),s("div",I,[s("div",N,[s("button",{type:"button",class:"btn btn-primary btn-block",onClick:e[3]||(e[3]=(...r)=>n.login&&n.login(...r)),disabled:o.isLoading},[o.isLoading?(i(),a("span",A)):d("",!0),g(" Sign in ")],8,U)]),O])])])]),T])])}const K=m(p,[["render",F]]);export{K as default};
