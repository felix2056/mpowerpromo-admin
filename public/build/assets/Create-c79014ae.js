import{N as E,a as U}from"./notification-8cc65fa4.js";import{s as S}from"./vue-multiselect.esm-7bd10f2f.js";import{r as f,o as n,c as r,f as g,a as e,w as c,v as u,n as h,t as d,b as a,e as m,F as w,g as C,D as b,C as D,h as B}from"./app-57257bd6.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const I={components:{Navigation:E,Notification:U,VueMultiselect:S},data(){return{isLoading:!1,isLoadingContries:!1,isUploading:!1,shouldCompress:!0,errorMsg:null,validationErrors:{},countries:[],domains:["mpowerpromo.localhost"],store:{name:"",logo:"",domain:"",subdomain:"",country_code:"",country_flag:"",phone_number:"",extension:"",redirectUrls:[]}}},computed:{isDisabled(){return this.isLoading},isInvalid(){return Object.keys(this.validationErrors).length>0},storeUrl(){let o="https://";return!this.store.subdomain&&this.store.domain&&(o+=this.store.domain.toLowerCase()),this.store.subdomain&&this.store.domain&&(o+=this.store.subdomain.toLowerCase()+"."+this.store.domain),o},sortedCountries(){return this.countries.sort((o,t)=>o.name.common<t.name.common?-1:o.name.common>t.name.common?1:0)}},watch:{"store.name":function(o){o?this.validationErrors.name=null:this.validationErrors.name=["The Store Name field is required"]},"store.subdomain":function(o){o?this.validationErrors.subdomain=null:this.validationErrors.subdomain=["The Store Subdomain field is required"]},"store.logo":function(o){o&&!this.validURL(o)?this.validationErrors.logo=["The Store Logo must be a valid URL"]:this.validationErrors.logo=null},"store.country_code":function(o){o?this.validationErrors.country_code=null:this.validationErrors.country_code=["The Store Country Code field is required"]},"store.phone_number":function(o){o?o&&!this.validPhoneNumber(o)?this.validationErrors.phone_number=["The Store Phone Number field is not a valid phone number"]:this.validationErrors.phone_number=null:this.validationErrors.phone_number=["The Store Phone Number field is required"]},"store.extension":function(o){o?this.validationErrors.extension=null:this.validationErrors.extension=["The Store Extension field is required"]}},mounted(){this.getCountries()},methods:{async getCountries(){try{this.isLoadingContries=!0;const o=await axios.get("https://restcountries.com/v3.1/all");this.countries=o.data,this.setSelectedCountry(this.countries.find(t=>t.cca2==="US")),this.isLoadingContries=!1}catch(o){console.log(o)}},setSelectedCountry(o){this.store.country_code=o.idd.root+o.idd.suffixes[0],this.store.country_flag=o.flags.svg},onFileChange(o){this.validationErrors.logo=null;const t=o.target.files[0],y=t.type,x=["image/gif","image/jpeg","image/png"],s=4*1024*1024;if(!x.includes(y)){this.validationErrors.logo=["The Logo must be a file of type: jpeg, jpg, png, gif."];return}if(t.size>s){this.validationErrors.logo=["The Logo must not be greater than 4MB."];return}this.isUploading=!0;const l=new FormData;l.append("logo",t),l.append("shouldCompress",this.shouldCompress),axios.post("/stores/upload",l,{headers:{"Content-Type":"multipart/form-data"}}).then(_=>{this.store.logo=_.data.temporary_file.path}).catch(_=>{_.response.status===422?this.validationErrors=_.response.data.errors:this.errorMsg=_.response.data.message}).finally(()=>{this.isUploading=!1})},onDragOver(o){o.preventDefault()},validURL(o){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&amp;a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(o)},validPhoneNumber(o){return new RegExp("^(?:(?:\\+|00)(\\d{1,3})[- ]?)?(?!0{4,})(?!9{4,})\\d{1,4}[- ]?\\d{1,4}[- ]?\\d{1,4}$","i").test(o)},saveStore(){this.isLoading=!0,this.errorMsg=null,this.validationErrors={},axios.post("/stores/create",this.store).then(o=>{this.$router.push({name:"store",params:{slug:o.data.store.slug}})}).catch(o=>{this.errorMsg=o.response.data.message,this.validationErrors=o.response.data.errors}).finally(()=>{this.isLoading=!1})}}},N={class:"dashboard"},T={id:"main",class:"slideout-panel slideout-panel-left"},j={class:"main-panel container-fluid pt-3"},q={class:"container"},z=B('<nav aria-label="breadcrumb"><ol class="breadcrumb mb-0"><li class="breadcrumb-item"><a href="/stores" class="" target="_self">Stores</a></li><li class="breadcrumb-item active"><span aria-current="page">Create Store</span></li></ol></nav><h1>Create Store</h1>',2),F=e("div",{class:"pb-3"},[e("div",{class:"form-group"},[e("div",{class:"d-flex justify-content-between align-items-center"},[e("div",null,[e("label",null," Create From Template ")])]),e("div",{tabindex:"-1",class:"multiselect",loadonfocus:"true",query:"[object Object]",optionsv:"",orderby:"name",ascending:"1",path:"/stores/distributors/64f8bf17bedafd072667a712?isTemplate=true&project=storeName&project=_id&project=storeUrl",isobject:"true"},[e("div",{class:"multiselect__select"}),e("div",{class:"multiselect__tags"},[e("div",{class:"multiselect__tags-wrap",style:{display:"none"}}),e("div",{class:"multiselect__spinner",style:{display:"none"}}),m(),e("input",{name:"Create From Template",type:"text",autocomplete:"nope",placeholder:"Select option",tabindex:"0",class:"multiselect__input",style:{width:"0px",position:"absolute",padding:"0px"}}),m(),e("span",{class:"multiselect__placeholder"}," Select option ")]),e("div",{tabindex:"-1",class:"multiselect__content-wrapper",style:{"max-height":"300px",display:"none"}},[e("ul",{class:"multiselect__content",style:{display:"block"}},[e("li",{style:{display:"none"}},[e("span",{class:"multiselect__option"},[e("span",null," Oops! No elements found. Consider changing the search query. ")])]),e("li",null,[e("span",{class:"multiselect__option"},[e("span",null,[e("span",null,"No Create From Template Options")])])])])])])])],-1),M={class:"row"},R={class:"col-12"},O={"data-spy":"scroll","data-target":"#navbar-scroll",class:""},P={autocomplete:"on",class:"col-12 p-0"},A={class:"form-group"},Y=e("label",{class:"cursor-pointer"},"Store Name",-1),G=e("a",{"hide-title":"true"},[e("i",{class:"fas fa-question-circle text-light ml-2"})],-1),H={class:""},J=e("div",{class:"row"},[e("div",{class:"col-4"}),e("div",{class:"col-4"}),e("div",{class:"col-4"})],-1),K={class:"d-flex"},Q={key:0,class:"invalid-feedback d-block"},W=e("div",null,null,-1),X={class:"form-group"},Z=e("label",{class:"cursor-pointer"},"Store Logo",-1),$=e("a",{"hide-title":"true"},[e("i",{class:"fas fa-question-circle text-light ml-2"})],-1),ee={class:""},se={key:0,class:"mr-2 mb-3"},oe=["src"],te={class:"d-flex"},ie=e("button",{type:"button",class:"btn btn-primary mr-3","data-toggle":"modal","data-target":"#__BVID__851"},"Upload",-1),le=["data-previous-value"],ne={key:1,class:"invalid-feedback d-block"},re={class:"pt-2 mt-2"},ae=e("label",null,"Store URL",-1),de={class:"d-flex mb-2"},ce={role:"group",class:"input-group"},_e=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text"},"https://")],-1),ue=e("div",{style:{padding:"22px 5px 0px","line-height":"16px"}},". ",-1),pe={class:"mb-3 small"},me=e("b",null,"Your StoreUrl:",-1),he={key:0,class:"invalid-feedback d-block"},ve={class:"pt-2"},fe={class:"d-lg-flex"},ge={class:"d-flex"},be={class:"form-group",style:{"max-width":"120px"},id:"__BVID__918"},ye=e("label",null,"Country",-1),xe={class:"dropdown b-dropdown form-control btn-group",style:{padding:"0px"},id:"__BVID__919"},we={"aria-haspopup":"menu","aria-expanded":"false",type:"button","data-toggle":"dropdown",class:"btn dropdown-toggle btn-white",id:"__BVID__919__BV_toggle_"},Ce={class:"ml-1 mr-1"},ke=["src"],Ve={role:"menu",tabindex:"-1",class:"dropdown-menu scroll-dropdown overflow-auto",style:{height:"230px"},"aria-labelledby":"__BVID__919__BV_toggle_"},Ee=["onClick"],Ue={role:"menuitem",href:"#",target:"_self",class:"dropdown-item"},Se={class:"d-flex"},De={class:"ml-2"},Be=["src"],Le={class:"ml-3"},Ie={class:"form-group flex-grow-1 form-group ml-2",id:"__BVID__1671"},Ne=e("legend",{tabindex:"-1",class:"bv-no-focus-ring col-form-label pt-0",id:"__BVID__1671__BV_label_"}," Phone Number ",-1),Te={key:0,class:"invalid-feedback d-block"},je={class:"d-flex"},qe={class:"form-group ml-lg-2 w-50",style:{width:"100px"}},ze=e("label",null,"Ext",-1),Fe={class:"pt-2 mt-2"},Me=e("label",null,"Verify password",-1),Re={class:"d-flex mb-2"},Oe={key:0,class:"invalid-feedback d-block"},Pe={class:"form-group"},Ae={class:"card p-3",id:"redirectURLsStore"},Ye={class:"d-flex justify-content-between"},Ge=e("h5",{class:"mt-2"},"Redirect URLs",-1),He={class:"row m-0"},Je={class:"col-11"},Ke={class:"input-group"},Qe=e("div",{class:"input-group-prepend"},[e("span",{class:"input-group-text"}," https:// ")],-1),We=["onUpdate:modelValue"],Xe={class:"col-1 text-right"},Ze=["onClick"],$e=e("i",{class:"far fa-trash"},null,-1),es=[$e],ss=e("div",null,null,-1),os={class:"mt-3",style:{position:"sticky",top:"0px","z-index":"1000"}},ts=["disabled"],is={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ls=e("button",{type:"button",class:"btn btn-link"},"Close",-1),ns={id:"__BVID__851",role:"dialog","aria-labelledby":"__BVID__851___BV_modal_title_","aria-describedby":"__BVID__851___BV_modal_body_",class:"modal fade","aria-modal":"true"},rs={class:"modal-dialog modal-md"},as=e("span",{tabindex:"0"},null,-1),ds={id:"__BVID__851___BV_modal_content_",tabindex:"-1",class:"modal-content"},cs=e("header",{id:"__BVID__851___BV_modal_header_",class:"modal-header"},[e("h5",{id:"__BVID__851___BV_modal_title_",class:"modal-title"},"Upload Image"),e("button",{type:"button","data-dismiss":"modal","aria-label":"Close",class:"close"},"Ã—")],-1),_s={id:"__BVID__851___BV_modal_body_",class:"modal-body"},us={enctype:"multipart/form-data",novalidate:"novalidate",style:{height:"100%"}},ps=e("div",null,[e("i",{class:"fas fa-cloud-upload fa-2x"})],-1),ms=e("div",null," Drag file(s) or click to browse ",-1),hs={key:0},vs=e("i",{class:"far fa-2x fa-spinner-third fa-spin text-primary"},null,-1),fs={key:1,class:"text-danger"},gs={class:"custom-control custom-checkbox"},bs=e("label",{for:"styled-checkbox",class:"custom-control-label"},"Compress",-1),ys={key:0,class:"my-2 d-flex",style:{"align-items":"center"}},xs={class:"d-flex flex-column text-center"},ws=["src"],Cs=e("i",{class:"far fa-trash-alt"},null,-1),ks=[Cs],Vs=e("div",{class:"flex-grow-1"},null,-1),Es=e("span",{tabindex:"0"},null,-1);function Us(o,t,y,x,s,l){const _=f("navigation"),k=f("VueMultiselect"),V=f("notification");return n(),r("div",N,[g(_),e("div",T,[e("div",j,[e("div",q,[z,F,e("div",M,[e("div",R,[e("div",O,[e("form",P,[e("div",null,[e("div",A,[e("div",null,[e("div",null,[Y,G,e("div",null,[e("div",H,[e("div",null,[J,e("div",K,[c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.store.name=i),minlength:"-Infinity",required:"required",autofocus:"autofocus",autocomplete:"temp",type:"text",id:"advanced-input-4",placeholder:"","data-mask":"","data-previous-value":"",class:h(["form-control",{"is-invalid":s.validationErrors.name}])},null,2),[[u,s.store.name]])]),s.validationErrors.name?(n(),r("div",Q,d(s.validationErrors.name[0]),1)):a("",!0)])])])]),W])]),e("div",X,[e("div",null,[e("div",null,[Z,$,e("div",null,[e("div",ee,[e("div",null,[e("div",null,[s.store.logo?(n(),r("div",se,[e("img",{src:s.store.logo,class:"img-thumbnail",style:{"max-height":"80px","max-width":"200px"}},null,8,oe)])):a("",!0),e("div",te,[ie,c(e("input",{minlength:"-Infinity",autofocus:"autofocus",autocomplete:"temp",type:"text",id:"advanced-input-5",placeholder:"","data-mask":"","data-previous-value":s.store.logo,"onUpdate:modelValue":t[1]||(t[1]=i=>s.store.logo=i),class:"form-control"},null,8,le),[[u,s.store.logo]])]),s.validationErrors.logo?(n(),r("div",ne,d(s.validationErrors.logo[0]),1)):a("",!0)])])])])]),e("div",null,[e("div",null,[e("div",re,[e("div",null,[ae,e("div",de,[e("div",null,[e("div",ce,[_e,c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.store.subdomain=i),type:"text",placeholder:"Sub Domain",class:h(["form-control",{"is-invalid":s.validationErrors.subdomain}]),id:"__BVID__88"},null,2),[[u,s.store.subdomain]])])]),ue,e("div",null,[g(k,{modelValue:s.store.domain,"onUpdate:modelValue":t[3]||(t[3]=i=>s.store.domain=i),options:s.domains,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select or search a domain",searchable:!0,"show-labels":!1,taggable:!1,"allow-empty":!1},null,8,["modelValue","options"])])]),e("div",pe,[me,m(" "+d(l.storeUrl),1)]),s.validationErrors.subdomain?(n(),r("div",he,d(s.validationErrors.subdomain[0]),1)):a("",!0)])]),e("div",ve,[e("div",fe,[e("div",ge,[e("div",null,[e("div",null,[e("fieldset",be,[e("div",null,[ye,e("div",xe,[e("button",we,[e("span",null,d(s.store.country_code),1),e("span",Ce,[e("img",{src:s.store.country_flag,style:{width:"30px"}},null,8,ke)])]),e("ul",Ve,[(n(!0),r(w,null,C(l.sortedCountries,(i,p)=>(n(),r("li",{key:p,role:"presentation",onClick:v=>l.setSelectedCountry(i)},[e("a",Ue,[e("div",Se,[e("span",De,[e("img",{src:i.flags.svg,style:{width:"30px"}},null,8,Be)]),e("span",Le,d(i.name.common),1)])])],8,Ee))),128))])])])])])]),e("fieldset",Ie,[Ne,e("div",null,[c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>s.store.phone_number=i),type:"tel",name:"Phone Number",placeholder:"123-456-7890",class:h(["form-control",{"is-invalid":s.validationErrors.phone_number}]),"data-mask":"###-###-####","data-previous-value":"","aria-required":"false","aria-invalid":"false"},null,2),[[u,s.store.phone_number]])]),s.validationErrors.phone_number?(n(),r("div",Te,d(s.validationErrors.phone_number[0]),1)):a("",!0)])]),e("div",je,[e("div",qe,[ze,c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>s.store.extension=i),type:"text",name:"Ext",class:"form-control","data-mask":"########","data-previous-value":"","aria-required":"false","aria-invalid":"false"},null,512),[[u,s.store.extension]])])])])]),e("div",Fe,[e("div",null,[Me,e("div",Re,[c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>s.store.password=i),type:"password",placeholder:"Verify password",class:h(["form-control",{"is-invalid":s.validationErrors.password}]),id:"__BVID__88"},null,2),[[u,s.store.password]])]),s.validationErrors.password?(n(),r("div",Oe,d(s.validationErrors.password[0]),1)):a("",!0)])])])])])]),e("div",Pe,[e("div",null,[e("div",Ae,[e("div",Ye,[Ge,e("a",{onClick:t[7]||(t[7]=i=>s.store.redirectUrls.push("")),href:"javascript:void(0)"}," Add ")]),(n(!0),r(w,null,C(s.store.redirectUrls,(i,p)=>(n(),r("div",{key:p,class:"form-group"},[e("div",He,[e("div",Je,[e("div",Ke,[Qe,c(e("input",{class:"form-control",type:"text","onUpdate:modelValue":v=>s.store.redirectUrls[p]=v,placeholder:"www.example.com"},null,8,We),[[u,s.store.redirectUrls[p]]])])]),e("div",Xe,[e("a",{onClick:v=>s.store.redirectUrls.splice(p,1),href:"javascript:void(0)"},es,8,Ze)])])]))),128))]),ss])])]),e("div",os,[e("button",{onClick:t[8]||(t[8]=b((...i)=>l.saveStore&&l.saveStore(...i),["prevent"])),disabled:l.isDisabled,type:"submit",class:"btn btn-primary",style:{top:"0px","z-index":"1000"}},[s.isLoading?(n(),r("span",is)):a("",!0),m(" Save Store ")],8,ts),ls])])])])])])])]),e("div",ns,[e("div",rs,[as,e("div",ds,[cs,e("div",_s,[e("div",null,[e("form",us,[e("div",{class:"file-upload-dropbox btn btn-outline-primary btn-block p-3",onClick:t[10]||(t[10]=i=>o.$refs.file.click()),onDragover:t[11]||(t[11]=b((...i)=>l.onDragOver&&l.onDragOver(...i),["prevent"])),onDrop:t[12]||(t[12]=b((...i)=>l.onFileChange&&l.onFileChange(...i),["prevent"]))},[e("input",{ref:"file",type:"file",name:"file",accept:"image/*",class:"input-file",onChange:t[9]||(t[9]=(...i)=>l.onFileChange&&l.onFileChange(...i))},null,544),ps,ms,s.isUploading?(n(),r("p",hs,[m(" Uploading 1 file... "),vs])):a("",!0),s.validationErrors.logo?(n(),r("p",fs,d(s.validationErrors.logo[0]),1)):a("",!0)],32)]),e("div",gs,[c(e("input",{"onUpdate:modelValue":t[13]||(t[13]=i=>s.shouldCompress=i),id:"styled-checkbox",type:"checkbox",class:"custom-control-input"},null,512),[[D,s.shouldCompress]]),bs]),s.store.logo?(n(),r("div",ys,[e("div",xs,[e("img",{src:s.store.logo,class:"img-responsive img-thumbnail",style:{"max-height":"100px","min-height":"100px","min-width":"100px"}},null,8,ws),e("button",{onClick:t[14]||(t[14]=i=>s.store.logo=""),class:"btn btn-sm btn-link mt-1"},ks)]),Vs])):a("",!0)])])]),Es])]),g(V)])}const Is=L(I,[["render",Us]]);export{Is as default};
